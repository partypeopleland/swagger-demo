version: "3"

dotenv: [ "secrets/secrets.env" ]

tasks:
  rest-codegen-code:
    desc: 產生 Client / Server Code
    cmds:
      - task: rest-codegen-client
      - task: rest-codegen-server
  
  rest-codegen-client:
    desc: 產生 Client Code
    cmds:
      - nswag openapi2csclient /input:doc/index.yaml /classname:LabSpecClient /namespace:Lab.SpecFirst.Adapter /output:swagger-demo/AutoGenerated/LabSpecClient.cs /jsonLibrary:SystemTextJson /generateClientInterfaces:true /exposeJsonSerializerSettings:false /useBaseUrl:false

  rest-codegen-server:
    desc: 產生 Server Code
    cmds:
      - nswag openapi2cscontroller /input:doc/index.yaml /classname:ArtDemoContract /namespace:swagger_demo.Controllers /output:swagger-demo/AutoGenerated/Controller.cs /jsonLibrary:SystemTextJson 